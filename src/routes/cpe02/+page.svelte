<script>
  import { onMount } from "svelte";
  import { goto } from "$app/navigation";
  import { checkLoginStatus } from "../../auth";

  let isLoggedIn = false;

  onMount(async () => {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î
    isLoggedIn = await checkLoginStatus(); // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏à‡∏≤‡∏Å Firebase
  });

  function handleNavigation(url) {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á URL
    if (isLoggedIn) {
      goto(url);
    } else {
      goto("/login"); // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤ Login
    }
  }
</script>

<div class="m-5">
  <a href="/" class="hover:underline">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a> > <b>‡πÅ‡∏ö‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô</b>
</div>
<div class="grid grid-rows-2 gap-4 h-auto px-4 py-6 lg:px-8 lg:py-6 overflow-hidden ">
  <!-- Row 1 -->
  <div class="grid grid-cols-1 lg:grid-cols-10 gap-4 relative">
    <!-- Column 1 (70%) -->
    <div class="lg:col-span-7 col-span-1 animated-left">
      <div class="block shadow-lg  w-full text-white text-center transition-transform duration-200" style="background-color: #4851b9;">
        <div class="flex flex-col justify-center items-center h-60">
          <p class="text-xl">üìú ‡∏Å‡∏£‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°</p>
          <p class="text-sm">
            ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
          </p>
          <button
            on:click={() => handleNavigation("/cpe02/form")}
            class="mt-3 bg-white text-black px-7 py-1 border-none hover:bg-gray-200"
          >
            ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
          </button>
        </div>
      </div>
    </div>
    <div class="animated-left absolute left-0 h-full w-20" style="background-color: #3d459c;">
    </div>

    <!-- Column 2 (30%) -->
    <div class="lg:col-span-3 col-span-1 p-4 hidden md:block"></div>
  </div>

  <!-- Row 2 -->
  <div class="grid grid-cols-1 lg:grid-cols-10 gap-4 relative">
    <!-- Column 1 (30%) -->
    <div class="lg:col-span-3 col-span-1 p-4 hidden md:block" ></div>

 
    <!-- Column 2 (70%) -->
    <div class="lg:col-span-7 col-span-1 animated-right ">
      <div class="block shadow-lg w-full text-white text-center bg-red-500 transition-transform duration-200">
        <div class="flex flex-col justify-center items-center h-60">
          <p class="text-xl">üìä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö‡πÄ‡∏™‡∏ô‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏á‡∏≤‡∏ô</p>
          <p class="text-sm">‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏ô‡∏≠‡πÑ‡∏ß‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
          <p class="text-sm">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</p>
          <button
            on:click={() => handleNavigation("/cpe02/data")}
            class="mt-3 bg-white text-black px-7 py-1 border-none hover:bg-gray-200"
          >
            ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
          </button>
        </div>
      </div>
    </div>
    <div class="animated-right bg-red-600 absolute right-0 h-full w-20">
    </div>
  </div>
</div>

<div class="custom-shape-divider-bottom-1737392204">
  <svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
      <path d="M985.66,92.83C906.67,72,823.78,31,743.84,14.19c-82.26-17.34-168.06-16.33-250.45.39-57.84,11.73-114,31.07-172,41.86A600.21,600.21,0,0,1,0,27.35V120H1200V95.8C1132.19,118.92,1055.71,111.31,985.66,92.83Z" class="shape-fill"></path>
  </svg>
</div>

<style>
  .custom-shape-divider-bottom-1737392204 {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    overflow: hidden;
    line-height: 0;
    z-index: -1;
}

.custom-shape-divider-bottom-1737392204 svg {
    position: relative;
    display: block;
    width: calc(274% + 1.3px);
    height: 210px;
    transform: rotateY(180deg);
}

.custom-shape-divider-bottom-1737392204 .shape-fill {
    fill: #FF8585;
}

.animated-left{
  opacity: 0; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ */
    transform: translateY(100px); /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
    animation: slideIn 1.5s ease-out forwards; /* ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ keyframes */

}.animated-right{
  opacity: 0; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ */
    transform: translateY(100px); /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
    animation: slideOut 1.5s ease-out forwards; /* ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ keyframes */

}
@keyframes slideIn {
    0% {
      opacity: 0;
      transform: translateX(-100px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideOut {
    0% {
      opacity: 0;
      transform: translateX(100px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>